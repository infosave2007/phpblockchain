RewriteEngine On

# Handle /public requests by routing to index.php which has static file serving
RewriteCond %{REQUEST_URI} ^/public/
RewriteRule ^(.*)$ index.php [QSA,L]

# Handle API requests
RewriteCond %{REQUEST_URI} ^/api/
RewriteRule ^api/(.*)$ api/$1 [QSA,L]

# Handle explorer requests - allow direct access to static files
RewriteCond %{REQUEST_URI} ^/explorer/
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^(.*)$ - [L]

# Handle assets requests - allow direct access
RewriteCond %{REQUEST_URI} ^/assets/
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^(.*)$ - [L]

# Handle other requests (but not explorer)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/explorer/
RewriteRule ^(.*)$ index.php [QSA,L]
